(window.webpackJsonp=window.webpackJsonp||[]).push([[12,9],{570:function(t,e,r){"use strict";r.r(e);r(14),r(23),r(99),r(25);var n={props:{features:{type:Array,default:null},highlight:{type:Object,default:null}},data:function(){return{map:null,baseLayers:[{layer:"terrain-light"},{layer:"overlay_bright"}],vectorSource:null,defaultStyle:null,highlightStyle:null,defaultPadding:[100,100,100,100]}},watch:{highlight:function(t){var e=this;if(t&&t.geometry){this.vectorSource.getFeatures().forEach((function(t){return t.setStyle(e.defaultStyle)}));var r=this.vectorSource.getFeatureById(t.id);r.setStyle(this.highlightStyle),this.map.getView().fit(r.getGeometry().getExtent(),{padding:this.defaultPadding,duration:500})}}},mounted:function(){this.createMap()},methods:{createMap:function(){var t=this,ol=this.$ol,e=new ol.WMTSCapabilities;this.defaultStyle=new ol.Style({stroke:new ol.Stroke({color:"rgba(0, 50, 71, 0.5)",width:3}),fill:new ol.Fill({color:"rgba(0, 50, 71, 0.2)"})}),this.highlightStyle=new ol.Style({stroke:new ol.Stroke({color:"rgba(0, 50, 71, 1)",width:3}),fill:new ol.Fill({color:"rgba(0, 50, 71, 0.4)"})}),fetch("https://s2maps.eu/WMTSCapabilities.xml").then((function(t){return t.text()})).then((function(text){var r=e.read(text),n=[];t.baseLayers.forEach((function(t){var e=ol.optionsFromCapabilities(r,{layer:t.layer,matrixSet:"EPSG:4326"});e.wrapX=!0,n.push(new ol.TileLayer({opacity:1,source:new ol.WMTS(e)}))}));var o={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:t.features.filter((function(t){return!!t.geometry}))};t.vectorSource=new ol.VectorSource({features:(new ol.GeoJSON).readFeatures(o)});var l=new ol.VectorLayer({source:t.vectorSource,style:t.defaultStyle});n.push(l),t.map=new ol.Map({layers:n,target:t.$refs.mapContainer,view:new ol.View({center:[0,0],zoom:0,multiWorld:!0,projection:"EPSG:4326"})}),t.map.getView().fit(t.vectorSource.getExtent(),{padding:t.defaultPadding})}))},unmount:function(){this.map=null}}},o=r(155),component=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("no-ssr",[e("div",{ref:"mapContainer",staticStyle:{height:"400px",width:"100%"}})])}),[],!1,null,null,null);e.default=component.exports},597:function(t,e,r){"use strict";r.r(e);r(99);var n={name:"CoverageDialog",components:{CoverageMap:r(570).default},props:{records:{type:Array,default:null},variable:{type:Object,default:null},disable:{type:Boolean,default:function(){return!1}}},data:function(){return{dialog:!1,showActivatorTooltip:!1,currentHighlight:null}},watch:{dialog:function(t){t?this.variable&&!this.records&&this.$emit("loadRecords"):this.$refs.map.unmount()}}},o=r(155),l=r(201),d=r.n(l),c=r(301),h=r(568),v=r(567),f=r(695),m=r(598),x=r(626),_=r(547),y=r(282),w=r(283),k=r(193),S=r(285),C=r(116),V=r(696),$=r(563),T=r(651),A=r(652),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{scrollable:"",width:"1000"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){return[r("v-btn",t._g(t._b({attrs:{icon:"",color:t.variable?"primary":"applications",disabled:t.disable},on:{mouseover:function(e){t.showActivatorTooltip=!0},mouseleave:function(e){t.showActivatorTooltip=!1}}},"v-btn",o,!1),n),[r("v-icon",[t._v(t._s(t.variable?"mdi-earth":"mdi-map-marker"))])],1)]}}],null,!0),model:{value:t.showActivatorTooltip,callback:function(e){t.showActivatorTooltip=e},expression:"showActivatorTooltip"}},[t._v(" "),r("span",[t._v("Coverage")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),t.records?r("v-card",[r("v-card-title",{staticClass:"text-h6"},[r("v-icon",{attrs:{color:"applications",left:""}},[t._v("\n        "+t._s(1===t.records.length?"mdi-map-marker":"mdi-earth")+"\n      ")]),t._v(" "),r("span",[t._v(t._s(1===t.records.length?t.records[0].properties.title:t.variable&&t.variable.name)+" Coverage")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",[t._v("mdi-close")])],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-text",{staticClass:"px-0 black--text"},[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"5"}},[t.variable?r("v-list",{attrs:{dense:"",subheader:""}},[r("v-subheader",{staticClass:"px-0"},[t._v("\n                Records\n              ")]),t._v(" "),r("v-divider"),t._v(" "),t._l(t.records,(function(e){return r("v-list-item",{key:e.id,staticClass:"px-0",staticStyle:{cursor:"pointer"},on:{mouseover:function(r){t.currentHighlight=e}}},[r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(e.properties.title))])],1),t._v(" "),r("v-list-item-action",{staticClass:"flex-row"},[t.variable?r("v-btn",{attrs:{icon:"",color:"primary",disabled:!e.geometry}},[r("v-icon",[t._v("mdi-map-marker")])],1):t._e(),t._v(" "),r("v-btn",{attrs:{icon:"",color:"primary",to:"/records/"+e.id,target:"_blank"}},[r("v-icon",[t._v("mdi-open-in-new")])],1)],1)],1)}))],2):t.records[0]?[r("div",[r("strong",[t._v("Name")])]),t._v(" "),r("div",{staticClass:"mb-2"},[t._v("\n                "+t._s(t.records[0].properties.title)+"\n              ")]),t._v(" "),r("div",[r("strong",[t._v("Region")])]),t._v(" "),r("div",{staticClass:"mb-2"},[t._v("\n                "+t._s(t.records[0].properties["osc:region"])+"\n              ")]),t._v(" "),r("div",[r("strong",[t._v("Satellite missions")])]),t._v(" "),r("div",{staticClass:"mb-2"},[t._v("\n                "+t._s(t.records[0].properties["osc:missions"].join(", "))+"\n              ")]),t._v(" "),r("div",[r("strong",[t._v("BBOX")])]),t._v(" "),r("div",{staticClass:"mb-2"},[t._v("\n                "+t._s(t.records[0].bbox)+"\n              ")])]:t._e()],2),t._v(" "),r("v-col",{attrs:{cols:"12",md:"7"}},[r("no-ssr",[t.records?r("CoverageMap",{ref:"map",attrs:{features:t.records,highlight:t.currentHighlight}}):t._e()],1)],1)],1)],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n        Close\n      ")])],1)],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;d()(component,{CoverageMap:r(570).default}),d()(component,{VBtn:c.a,VCard:h.a,VCardActions:v.a,VCardText:v.c,VCardTitle:v.d,VCol:f.a,VContainer:m.a,VDialog:x.a,VDivider:_.a,VIcon:y.a,VList:w.a,VListItem:k.a,VListItemAction:S.a,VListItemContent:C.a,VListItemTitle:C.b,VRow:V.a,VSpacer:$.a,VSubheader:T.a,VTooltip:A.a})},603:function(t,e,r){var content=r(628);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(31).default)("c2657ce6",content,!0,{sourceMap:!1})},627:function(t,e,r){"use strict";r(603)},628:function(t,e,r){var n=r(30)(!1);n.push([t.i,"[data-v-f0a6ee74] table{font-size:14px;font-weight:700}[data-v-f0a6ee74] table td:not(:first-child):not(:nth-child(2)):not(:last-child),[data-v-f0a6ee74] table th:not(:first-child):not(:nth-child(2)):not(:last-child){padding:0!important}[data-v-f0a6ee74] table td:first-child,[data-v-f0a6ee74] table td:last-child,[data-v-f0a6ee74] table td:nth-child(2),[data-v-f0a6ee74] table th:first-child,[data-v-f0a6ee74] table th:last-child,[data-v-f0a6ee74] table th:nth-child(2){position:-webkit-sticky;position:sticky;background:#fff}[data-v-f0a6ee74] table td:first-child,[data-v-f0a6ee74] table td:last-child,[data-v-f0a6ee74] table td:nth-child(2){z-index:3!important}[data-v-f0a6ee74] table th:first-child,[data-v-f0a6ee74] table th:last-child,[data-v-f0a6ee74] table th:nth-child(2){z-index:4!important}[data-v-f0a6ee74] table td:first-child,[data-v-f0a6ee74] table th:first-child{left:0;width:70px;min-width:70px;max-width:70px}[data-v-f0a6ee74] table td:nth-child(2),[data-v-f0a6ee74] table th:nth-child(2){left:70px;width:136px;min-width:136px;max-width:136px;border-right:thin solid rgba(0,0,0,.12)}[data-v-f0a6ee74] table td:last-child,[data-v-f0a6ee74] table th:last-child{right:0;width:100px;min-width:100px;max-width:100px;border-left:thin solid rgba(0,0,0,.12)}@media (max-width:800px){[data-v-f0a6ee74] table td:first-child,[data-v-f0a6ee74] table th:first-child{width:34px;min-width:34px;max-width:34px;padding:0!important}[data-v-f0a6ee74] table td:nth-child(2),[data-v-f0a6ee74] table th:nth-child(2){left:34px;width:90px;min-width:90px;max-width:90px;padding:0 2px!important}[data-v-f0a6ee74] table td:last-child,[data-v-f0a6ee74] table th:last-child{width:40px;min-width:40px;max-width:40px;overflow:hidden;word-wrap:break-word;padding:0 2px!important;text-align:right!important}}[data-v-f0a6ee74] .v-data-table__expanded__content{box-shadow:none!important}.subCell[data-v-f0a6ee74]{border-bottom:thin solid rgba(0,0,0,.12);overflow:hidden;line-height:normal;word-wrap:break-word}[data-v-f0a6ee74] table>tbody>tr:hover:not(.v-data-table__empty-wrapper){background:#eee!important}.noAvailableProduct[data-v-f0a6ee74]{font-size:10px;margin:4px;padding:3px;background:#b67e34;border-radius:5px;color:#fff;width:50px;text-align:center}[data-v-f0a6ee74] table td{padding:0 10px!important}[data-v-f0a6ee74] .hoverCell{background-color:#eee!important}[data-v-f0a6ee74] .v-progress-linear,[data-v-f0a6ee74] th span{pointer-events:none}[data-v-f0a6ee74] td:not(:first-child):not(:nth-child(2)):not(:last-child),[data-v-f0a6ee74] th:not(:first-child):not(:nth-child(2)):not(:last-child){width:var(--table-cell);min-width:var(--table-cell);max-width:var(--table-cell)}.hide-even[data-v-f0a6ee74]  th:not(:first-child):not(:nth-child(2)):not(:last-child):nth-child(odd){z-index:3;text-align:center}.hide-even[data-v-f0a6ee74]  th:not(:first-child):not(:nth-child(2)):not(:last-child):nth-child(2n){z-index:2}.hide-even[data-v-f0a6ee74]  th:not(:first-child):not(:nth-child(2)):not(:last-child):nth-child(2n)>span{visibility:hidden}@media (max-width:800px){.hide-even[data-v-f0a6ee74]  th:not(:first-child):not(:nth-child(2)):not(:last-child):nth-child(n){z-index:2}.hide-even[data-v-f0a6ee74]  th:not(:first-child):not(:nth-child(2)):not(:last-child):nth-child(n)>span{visibility:hidden}.hide-even[data-v-f0a6ee74]  th:not(:first-child):not(:nth-child(2)):not(:last-child):nth-child(6n){z-index:3;text-align:center}.hide-even[data-v-f0a6ee74]  th:not(:first-child):not(:nth-child(2)):not(:last-child):nth-child(6n)>span{visibility:visible}}",""]),t.exports=n},657:function(t,e,r){"use strict";r.r(e);var n=r(53),o=(r(179),r(41),r(99),r(14),r(23),r(58),r(78),r(86),r(75),{name:"MetricsTable",components:{Coverage:r(597).default},props:{filter:{type:String,default:function(){return""}},headers:{type:Array,default:function(){return[]}},items:{type:Array,default:function(){return[]}},tableZoom:{type:Number,default:100}},data:function(){return{isMounted:!1,expanded:[],variables:{},records:{}}},computed:{transformedHeaders:function(){var t=this.headers.map((function(t){return{text:t,value:t}}));return t.unshift({text:"Name",value:"name"}),t.push({text:"Coverage",value:"coverage"}),t},cssProps:function(){if(this.isMounted){var t=this.tableZoom*(this.$vuetify.breakpoint.smOnly?1.6:1.8)*this.$refs.table.$el.clientWidth/100;return{"--table-cell":"".concat(t,"px")}}}},watch:{tableZoom:function(){this.$nextTick((function(){document.querySelector(".v-data-table__wrapper").scrollLeft=1e4}))}},mounted:function(){this.isMounted=!0,this.$nextTick((function(){document.querySelector(".v-data-table__wrapper").scrollLeft=1e4,document.querySelector("table").addEventListener("mouseover",(function(t){var e=t.target,r=e.parentNode.children,n=Array.prototype.indexOf.call(r,e);document.querySelectorAll(".hoverCell").forEach((function(t){t.classList.remove("hoverCell")})),0!==n&&1!==n&&n!==r.length-1&&document.querySelectorAll("td:nth-child(".concat(n+1,")")).forEach((function(t){t.classList.add("hoverCell")}))}))}))},methods:{expandVariable:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.slugify(t.name),e.records[o]){r.next=10;break}return r.next=4,e.$staticCatalog.$get("/variables/".concat(o));case 4:return l=r.sent,e.$set(e.variables,o,e.variable),d=[],r.next=9,Promise.all(l.links.map(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(link){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("item"!==link.rel){t.next=5;break}return t.next=3,e.$staticCatalog.$get("/products/".concat(link.href.slice(0,-5)));case 3:r=t.sent,d.push(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 9:e.$set(e.records,o,d);case 10:case"end":return r.stop()}}),r)})))()},getRecords:function(t){var e=[];return this.records[this.slugify(t)]&&(e=this.records[this.slugify(t)]),e}}}),l=o,d=(r(627),r(155)),c=r(201),h=r.n(c),v=r(301),f=r(691),m=r(282),x=r(286),_=r(652),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-data-table",{ref:"table",class:t.tableZoom<2?"hide-even ":"",style:t.cssProps,attrs:{headers:t.transformedHeaders,items:t.items,"items-per-page":-1,"item-key":"name",search:t.filter,"disable-sort":"",height:t.$vuetify.breakpoint.mdAndUp?"60vh":"70vh","fixed-header":"","hide-default-footer":"","show-expand":"",expanded:t.expanded,"mobile-breakpoint":0},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"header.name",fn:function(e){var header=e.header;return[t._v("\n    "+t._s(header.text)+"\n    "),t._v(" "),r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({style:"position: absolute; left: "+(t.$vuetify.breakpoint.xsOnly?-34:-60)+"px; top: 5px",attrs:{icon:""},on:{click:function(e){t.expanded=t.expanded.length===t.items.length?[]:t.items}}},n),[r("v-icon",{attrs:{small:!!t.$vuetify.breakpoint.xsOnly}},[t._v("\n            "+t._s(t.expanded.length===t.items.length?"mdi-arrow-collapse-vertical":"mdi-arrow-expand-vertical")+"\n          ")])],1)]}}],null,!0)},[t._v(" "),r("span",[t._v(t._s(t.expanded.length===t.items.length?"Close all":"Expand all"))])])]}},{key:"item.data-table-expand",fn:function(e){var n=e.item,o=e.isExpanded,l=e.expand;return[n.summary.numberOfProducts&&!o?r("v-btn",{attrs:{icon:""},on:{click:function(){l(!0),t.expandVariable(n)}}},[r("v-icon",[t._v("mdi-chevron-down")])],1):n.summary.numberOfProducts&&o?r("v-btn",{attrs:{icon:""},on:{click:function(){l(!1),t.expandVariable(n)}}},[r("v-icon",[t._v("mdi-chevron-up")])],1):r("div",{staticClass:"noAvailableProduct"},[t._v("\n      No products available\n    ")])]}},{key:"expanded-item",fn:function(e){var n=e.item;return[t.getRecords(n.name).length>0?r("td",{staticClass:"pa-0",staticStyle:{"z-index":"0 !important"},attrs:{colspan:t.transformedHeaders.length+1}},[r("table",{staticStyle:{width:"100%","border-spacing":"0"}},[r("tbody",t._l(t.getRecords(n.name),(function(e){return r("tr",{key:e.id,staticStyle:{"line-height":"3"}},[r("td",{staticClass:"px-4 text-start subCell"},[r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on;return[r("v-btn",t._g({attrs:{icon:"",small:"",color:"applications",to:"/records/"+e.id,target:"_blank"}},o),[r("v-icon",[t._v("\n                      mdi-open-in-new\n                    ")])],1)]}}],null,!0)},[t._v(" "),r("span",[t._v("Go to "+t._s(e.properties.title)+" record")])])],1),t._v(" "),r("td",{staticClass:"px-4 py-2 subCell"},[r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on;return[r("nuxt-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/records/"+e.id}},[r("small",t._g({staticStyle:{cursor:"pointer"}},o),[t._v(t._s(e.properties.title))])])]}}],null,!0)},[t._v(" "),r("span",[t._v("Go to "+t._s(e.properties.title)+" record")])])],1),t._v(" "),t._l(t.headers,(function(n){return r("td",{key:n,staticClass:"subCell"},[e.properties.start_datetime.slice(0,4)<=n&&e.properties.end_datetime.slice(0,4)>=n?r("v-progress-linear",{key:n,style:"border-radius: "+(e.properties.start_datetime.slice(0,4)==n?5:0)+"px "+(e.properties.end_datetime.slice(0,4)==n?5:0)+"px "+(e.properties.end_datetime.slice(0,4)==n?5:0)+"px "+(e.properties.start_datetime.slice(0,4)==n?5:0)+"px",attrs:{color:"applications",height:"15",value:"100"}}):r("span",{staticStyle:{visibility:"hidden"}},[t._v("no data")])],1)})),t._v(" "),r("td",{staticClass:"px-4 subCell"},[r("Coverage",{attrs:{records:[e]}})],1)],2)})),0)])]):t._e()]}},t._l(t.headers,(function(e,n){return{key:"item."+e,fn:function(o){var l=o.item;return[l.summary.years.includes(e)?r("v-progress-linear",{key:e,style:"border-radius: "+(l.summary.years.includes(t.headers[n-1])?0:5)+"px "+(l.summary.years.includes(t.headers[n+1])?0:5)+"px "+(l.summary.years.includes(t.headers[n+1])?0:5)+"px "+(l.summary.years.includes(t.headers[n-1])?0:5)+"px;",attrs:{color:"secondary",height:"15",value:"100"}}):t._e()]}}})),{key:"item.name",fn:function(e){var n=e.item;return[r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[r("nuxt-link",t._g({staticStyle:{cursor:"pointer","font-size":"12px","text-decoration":"none"},attrs:{to:"variables/"+t.slugify(n.name)}},o),[t._v("\n          "+t._s(n.name)+"\n        ")])]}}],null,!0)},[t._v(" "),r("span",[t._v("Go to "+t._s(n.name)+" variable")])])]}},{key:"item.coverage",fn:function(e){var n=e.item;return[r("Coverage",{attrs:{variable:n,records:t.records[t.slugify(n.name)],disable:!n.summary.numberOfProducts},on:{loadRecords:function(e){return t.expandVariable(n)}}})]}}],null,!0)})}),[],!1,null,"f0a6ee74",null);e.default=component.exports;h()(component,{Coverage:r(597).default}),h()(component,{VBtn:v.a,VDataTable:f.a,VIcon:m.a,VProgressLinear:x.a,VTooltip:_.a})}}]);