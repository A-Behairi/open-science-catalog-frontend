(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{588:function(e,t,r){var content=r(595);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(38).default)("b7fa5fcc",content,!0,{sourceMap:!1})},592:function(e,t,r){"use strict";r.r(t);r(26),r(21),r(31),r(32);var n=r(7);r(25),r(13),r(23),r(127),r(215);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={props:{features:{type:Array,default:null},highlight:{type:Object,default:null},enableDraw:{type:Boolean,default:!1}},data:function(){return{map:null,draw:null,baseLayers:[{layer:"terrain-light"},{layer:"overlay_bright"}],vectorSource:null,defaultStyle:null,highlightStyle:null,defaultPadding:[50,25,50,25],loading:!0,clearButton:null}},watch:{features:{deep:!0,handler:function(e){if(this.vectorSource){var t={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:e?e.filter((function(e){return!!e.geometry})):[]},r=(new this.$ol.GeoJSON).readFeatures(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});this.vectorSource.clear(),this.vectorSource.addFeatures(r)}}},highlight:function(e){var t=this;if(this.vectorSource.getFeatures().forEach((function(e){return e.setStyle(t.defaultStyle)})),this.map&&e&&e.geometry){var r=this.vectorSource.getFeatureById(e.id);r.setStyle(this.highlightStyle),console.log(r.getGeometry().getExtent()),this.map.getView().fit(r.getGeometry().getExtent(),{padding:this.defaultPadding,duration:500})}else this.map.getView().fit([-180,-90,180,90],{padding:this.defaultPadding,duration:500})}},mounted:function(){this.createMap()},methods:{createMap:function(){var e=this,ol=this.$ol,t=new ol.WMTSCapabilities;this.defaultStyle=new ol.Style({stroke:new ol.Stroke({color:"rgba(0, 50, 71, 0.5)",width:3}),fill:new ol.Fill({color:"rgba(0, 50, 71, 0.1)"})}),this.highlightStyle=new ol.Style({stroke:new ol.Stroke({color:"rgba(20, 100, 91, 1)",width:3}),fill:new ol.Fill({color:"rgba(0, 200, 71, 0.4)"})}),fetch("https://s2maps.eu/WMTSCapabilities.xml").then((function(e){return e.text()})).then((function(text){var r=t.read(text),n=[];e.baseLayers.forEach((function(t){var o=ol.optionsFromCapabilities(r,{layer:t.layer,matrixSet:"WGS84"});n.push(new ol.TileLayer({opacity:1,source:new ol.WMTS(l(l({},o),{},{wrapX:!0,attributions:r.Contents.Layer.find((function(e){return e.Identifier===t.layer})).Abstract+(e.baseLayers.indexOf(t)<e.baseLayers.length-1?",":"")}))}))}));var o={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:e.features?e.features.filter((function(e){return!!e.geometry})):[]};e.vectorSource=new ol.VectorSource({features:(new ol.GeoJSON).readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"})}),e.vectorSource.on("clear",(function(){e.map.removeControl(e.clearButton)}));var c=new ol.VectorLayer({source:e.vectorSource,style:e.defaultStyle});n.push(c),e.clearButton=new ol.ClearMap,e.map=new ol.Map({layers:n,target:e.$refs.mapContainer,view:new ol.View({center:[0,0],zoom:2,multiWorld:!0,projection:"EPSG:4326"})}),e.features&&e.map.getView().fit(e.vectorSource.getExtent(),{padding:e.defaultPadding}),e.map.on("loadstart",(function(){e.loading=!1})),e.enableDraw&&(e.draw=new ol.Draw({source:e.vectorSource,type:"Circle",geometryFunction:ol.createBox()}),e.map.addInteraction(e.draw),e.draw.on("drawstart",(function(){e.vectorSource.clear()})),e.draw.on("drawend",(function(t){e.$emit("drawEnd",t.feature.getGeometry()),e.map.addControl(e.clearButton)})))}))},clearFeatures:function(){this.vectorSource.clear()}}},d=(r(594),r(162)),f=r(214),h=r.n(f),y=r(298),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("client-only",[r("div",{staticStyle:{position:"relative"}},[r("div",{staticClass:"d-flex align-center justify-center",staticStyle:{position:"absolute",width:"100%",height:"100%"}},[e.loading?r("v-progress-circular",{attrs:{color:"primary",size:70,indeterminate:""}}):e._e()],1),e._v(" "),r("div",{ref:"mapContainer",style:"height: "+(e.$vuetify.breakpoint.smOnly?"200px":"400px")+"; width: 100%;"})])])}),[],!1,null,null,null);t.default=component.exports;h()(component,{VProgressCircular:y.a})},594:function(e,t,r){"use strict";r(588)},595:function(e,t,r){var n=r(37)(!1);n.push([e.i,".clear-btn{top:15px;right:.5em}.clear-btn button{width:auto!important;padding:0 .5em!important}",""]),e.exports=n}}]);